{"remainingRequest":"C:\\Users\\ciz\\IdeaProjects\\test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ciz\\IdeaProjects\\test\\src\\components\\main\\Working.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ciz\\IdeaProjects\\test\\src\\components\\main\\Working.vue","mtime":1581058995841},{"path":"C:\\Users\\ciz\\IdeaProjects\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\test\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBodHRwIGZyb20gIi4uLy4uL2h0dHAtY29tbW9uIjsKaW1wb3J0IENsb2NrIGZyb20gIi4uL3dvcmtpbmcvQ2xvY2siOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIldvcmtpbmdTdWJNZW51IiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgd29ya2luZzogewogICAgICAgICAgICAgICAgZW1wSWQ6ICIiLAogICAgICAgICAgICAgICAgd29ya2luZ0RhdGU6ICIiLAogICAgICAgICAgICAgICAgd29ya2luZ0luOiAiIiwKICAgICAgICAgICAgICAgIHdvcmtpbmdPdXQ6ICIiLAogICAgICAgICAgICAgICAgd29ya2luZ1RpbWU6ICIiLAogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0sLy8gRW5kIC0gZGF0YQogICAgY29tcG9uZW50czogewogICAgICAgIENsb2NrOiBDbG9jawogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovCiAgICAgICAgcmVhZFdvcmtpbmdUb2RheSgpIHsvL+uLueydvOyXkCDstpzth7Tqt7zquLDroZ3snbQg7J6I7Jy866m0IOu2iOufrOyYqOuLpCwgbW91bnRlZCgp65WMIO2YuOy2nOuQmOuKlCDrqZTshozrk5wuCiAgICAgICAgICAgIGh0dHAKICAgICAgICAgICAgICAgIC5nZXQoIi93b3JraW5nL3JlYWRUb2RheS8iICsgdGhpcy53b3JraW5nLmVtcElkKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMud29ya2luZyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInJlYWQiICsgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwvLyBFbmQgLSByZWFkV29ya2luZ1RvZGF5KCkKICAgICAgICBzYXZlV29ya2luZ0luKCkgey8vIOy2nOq3vOyLnCDstpzqt7wg7Iuc6rCE7J2EIERC7JeQIOyggOyepe2VmOq4sCDsnITtlZwg66mU7IaM65OcCiAgICAgICAgICAgIGh0dHAKICAgICAgICAgICAgICAgIC5nZXQoIi93b3JraW5nL3NhdmVJbi8iICsgdGhpcy53b3JraW5nLmVtcElkKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMud29ya2luZy53b3JraW5nSW4gPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sLy8gRW5kIC0gc2F2ZVdvcmtpbmdJbigpCiAgICAgICAgc2F2ZVdvcmtpbmdPdXQoKSB7Ly8g7Ye06re8IOyLnCDth7Tqt7wg7Iuc6rCE7J2EIERC7JeQIOyggOyepe2VmOq4sCDsnITtlZwg66mU7IaM65OcCiAgICAgICAgICAgIGh0dHAKICAgICAgICAgICAgICAgIC5nZXQoIi93b3JraW5nL3NhdmVPdXQvIiArIHRoaXMud29ya2luZy5lbXBJZCkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtpbmcud29ya2luZ091dCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjV29ya2luZ1RpbWUoKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LC8vIEVuZCAtIHNhdmVXb3JraW5nT3V0KCkKICAgICAgICBzYXZlV29ya2luZ1RpbWUoKSB7Ly8g7LSdIOq3vOustCDsi5zqsITsnYQgRELsl5Ag7KCA7J6l7ZWY6riwIOychO2VnCDrqZTshozrk5wKICAgICAgICAgICAgaHR0cAogICAgICAgICAgICAgICAgLmdldCgiL3dvcmtpbmcvc2F2ZVRpbWUvIiArIHRoaXMud29ya2luZy5lbXBJZCArICI/dGltZT0iICsgdGhpcy53b3JraW5nLndvcmtpbmdUaW1lKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMud29ya2luZy53b3JraW5nVGltZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwvLyBFbmQgLSBzYXZlV29ya2luZ1RpbWUoKQogICAgICAgIGNhbGNXb3JraW5nVGltZSgpIHsvLyDstJ0g6re866y0IOyLnOqwhOydhCDqs4TsgrDtlZjripQg66mU7IaM65OcCiAgICAgICAgICAgIGxldCB3aXQgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKCIwMDAxLTAxLTAxICIgKyB0aGlzLndvcmtpbmcud29ya2luZ0luKSk7Ly8g7Lac6re87Iuc6rCE7J2EIERhdGXtmJXsnLzroZwg7ZiV67OA7ZmYCiAgICAgICAgICAgIGxldCB3b3QgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKCIwMDAxLTAxLTAxICIgKyB0aGlzLndvcmtpbmcud29ya2luZ091dCkpOy8vIO2HtOq3vOyLnOqwhOydhCBEYXRl7ZiV7Jy866GcIO2YleuzgO2ZmAoKICAgICAgICAgICAgd290LnNldEhvdXJzKHdvdC5nZXRIb3VycygpIC0gd2l0LmdldEhvdXJzKCkpOy8vIOyLnCDrtoDrtoTrgbzrpqwg7Jew7IKwCiAgICAgICAgICAgIHdvdC5zZXRNaW51dGVzKHdvdC5nZXRNaW51dGVzKCkgLSB3aXQuZ2V0TWludXRlcygpKTsvLyDrtoQg67aA67aE64G866asIOyXsOyCsAogICAgICAgICAgICB3b3Quc2V0U2Vjb25kcyh3b3QuZ2V0U2Vjb25kcygpIC0gd2l0LmdldFNlY29uZHMoKSk7Ly8g7LSIIOu2gOu2hOuBvOumrCDsl7DsgrAKCiAgICAgICAgICAgIHRoaXMud29ya2luZy53b3JraW5nVGltZSA9IHdvdC50b1N0cmluZygpLnN1YnN0cigxNiwgOCk7IC8vIOyXsOyCsOuQnCDqsJLspJEg7Iuc6rCE7JeQIOq0gOugqOuQnCDrtoDrtoTsnYQg7J6Y65287IScIOyggOyepQogICAgICAgICAgICB0aGlzLnNhdmVXb3JraW5nVGltZSgpOy8vIERC7JeQIOy0nSDqt7zrrLQg7Iuc6rCEIOyggOyepQogICAgICAgIH0sLy8gRW5kIC0gY2FsY1dvcmtpbmdUaW1lKCkKICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi8KICAgIH0sLy8gRW5kIC0gbWV0aG9kcwogICAgbW91bnRlZCgpIHsKICAgICAgICAvLyBtb3VudGVkIOuQoCDrlYwg66Gc6re47J247J20IOuQmOyWtOyeiOuKlCDsg4Htg5zrnbzrqbQKICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UubGVuZ3RoID4gMCkgeyAvLyDtmITsnqwgc2Vzc2lvblN0b3JhZ2Xsl5Ag7JqU7IaM6rCAIOyhtOyerO2VmOuKlCDsg4Htg5zsnbwg65WMKOuhnOq3uOyduOydtCDrkJjslrTshJwgc2Vzc2lvblN0b3JhZ2Xsl5Ag7KCA7J6l65CcIOyDge2DnOydvCDrlYwpCiAgICAgICAgICAgIHRoaXMud29ya2luZy5lbXBJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luX2lkIik7Ly8gc2Vzc2lvblN0b3JhZ2Xsl5DshJwg7IKs67KIIOqwgOyguOyYpOq4sAogICAgICAgICAgICB0aGlzLnJlYWRXb3JraW5nVG9kYXkoKTsvLyDstpzth7Tqt7wg6riw66GdIOqwgOyguOyYpOq4sAogICAgICAgIH0KICAgIH0vLyBFbmQgLSBtb3VudGVkKCkKfTsvLyBFbmQgLSBleHBvcnQgZGVmYXVsdAo="},{"version":3,"sources":["Working.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Working.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\r\n    <div class=\"mainWorking\">\r\n        <div class=\"alignCenter\">\r\n            <Clock></Clock>\r\n            출근시간:{{this.working.workingIn}}<br>\r\n            퇴근시간:{{this.working.workingOut}}<br>\r\n            근무시간:{{this.working.workingTime}}<br>\r\n            <button v-if=\"!this.working.workingIn\" v-on:click=\"saveWorkingIn()\"\r\n                    class=\"btn btn-outline-danger btn-working\">출근\r\n            </button>\r\n            <button v-else class=\"btn btn-danger disabled\">출근</button>\r\n\r\n            <button v-if=\"!this.working.workingOut\" v-on:click=\"saveWorkingOut()\"\r\n                    class=\"btn btn-outline-info btn-working\">퇴근\r\n            </button>\r\n            <button v-else class=\"btn btn-info disabled\">퇴근</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import http from \"../../http-common\";\r\n    import Clock from \"../working/Clock\";\r\n\r\n    export default {\r\n        name: \"WorkingSubMenu\",\r\n        data() {\r\n            return {\r\n                working: {\r\n                    empId: \"\",\r\n                    workingDate: \"\",\r\n                    workingIn: \"\",\r\n                    workingOut: \"\",\r\n                    workingTime: \"\",\r\n                }\r\n            };\r\n        },// End - data\r\n        components: {\r\n            Clock: Clock\r\n        },\r\n        methods: {\r\n            /* eslint-disable no-console */\r\n            readWorkingToday() {//당일에 출퇴근기록이 있으면 불러온다, mounted()때 호출되는 메소드.\r\n                http\r\n                    .get(\"/working/readToday/\" + this.working.empId)\r\n                    .then(response => {\r\n                        this.working = response.data;\r\n                        console.log(\"read\" + response.data);\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                    });\r\n            },// End - readWorkingToday()\r\n            saveWorkingIn() {// 출근시 출근 시간을 DB에 저장하기 위한 메소드\r\n                http\r\n                    .get(\"/working/saveIn/\" + this.working.empId)\r\n                    .then(response => {\r\n                        this.working.workingIn = response.data;\r\n                        console.log(response.data);\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                    });\r\n            },// End - saveWorkingIn()\r\n            saveWorkingOut() {// 퇴근 시 퇴근 시간을 DB에 저장하기 위한 메소드\r\n                http\r\n                    .get(\"/working/saveOut/\" + this.working.empId)\r\n                    .then(response => {\r\n                        this.working.workingOut = response.data;\r\n                        console.log(response.data);\r\n                        this.calcWorkingTime();\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                    });\r\n            },// End - saveWorkingOut()\r\n            saveWorkingTime() {// 총 근무 시간을 DB에 저장하기 위한 메소드\r\n                http\r\n                    .get(\"/working/saveTime/\" + this.working.empId + \"?time=\" + this.working.workingTime)\r\n                    .then(response => {\r\n                        this.working.workingTime = response.data;\r\n                        console.log(response.data);\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                    });\r\n            },// End - saveWorkingTime()\r\n            calcWorkingTime() {// 총 근무 시간을 계산하는 메소드\r\n                let wit = new Date(Date.parse(\"0001-01-01 \" + this.working.workingIn));// 출근시간을 Date형으로 형변환\r\n                let wot = new Date(Date.parse(\"0001-01-01 \" + this.working.workingOut));// 퇴근시간을 Date형으로 형변환\r\n\r\n                wot.setHours(wot.getHours() - wit.getHours());// 시 부분끼리 연산\r\n                wot.setMinutes(wot.getMinutes() - wit.getMinutes());// 분 부분끼리 연산\r\n                wot.setSeconds(wot.getSeconds() - wit.getSeconds());// 초 부분끼리 연산\r\n\r\n                this.working.workingTime = wot.toString().substr(16, 8); // 연산된 값중 시간에 관련된 부분을 잘라서 저장\r\n                this.saveWorkingTime();// DB에 총 근무 시간 저장\r\n            },// End - calcWorkingTime()\r\n            /* eslint-enable no-console */\r\n        },// End - methods\r\n        mounted() {\r\n            // mounted 될 때 로그인이 되어있는 상태라면\r\n            if (sessionStorage.length > 0) { // 현재 sessionStorage에 요소가 존재하는 상태일 때(로그인이 되어서 sessionStorage에 저장된 상태일 때)\r\n                this.working.empId = sessionStorage.getItem(\"login_id\");// sessionStorage에서 사번 가져오기\r\n                this.readWorkingToday();// 출퇴근 기록 가져오기\r\n            }\r\n        }// End - mounted()\r\n    };// End - export default\r\n</script>\r\n\r\n<style>\r\n    .alignCenter {\r\n        text-align: center;\r\n    }\r\n    .mainWorking{\r\n        width: 15%;\r\n        height: 50%;\r\n        left: 15px;\r\n        top: 50%;\r\n        position: absolute;\r\n        border: 1px solid gray;\r\n    }\r\n</style>\r\n"]}]}