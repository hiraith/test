{"remainingRequest":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\src\\components\\survey\\EndSurvey.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\src\\components\\survey\\EndSurvey.vue","mtime":1581408201740},{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBodHRwIGZyb20gIi4uLy4uL2h0dHAtY29tbW9uIjsKaW1wb3J0IFN1cnZleVN1Ym1lbnUgZnJvbSAiLi9TdXJ2ZXlTdWJtZW51IjsKaW1wb3J0IFZ1ZUFwZXhDaGFydHMgZnJvbSAndnVlLWFwZXhjaGFydHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAic3VydmV5IiwKCiAgICBkYXRhKCkgewoKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBmbGV4OiAiIiwvLyDrgpjspJHsl5Ag7KGw6rG0IOqygOyCrO2VmOuptCDquIAg7J6R7ISx7J6QPT3rgpgg7J2865WMIGZhbHNl66GcIOuwlOq+uOq4sAogICAgICAgICAgICBmbGFnOiIiLAogICAgICAgICAgICBlbXBJRDogIiIsIC8v7ZiE7J6sIOuhnOq3uOyduCDrkJwgZW1wSUTrpbwg6rCA7KC47Jio64ukLgogICAgICAgICAgICAvLzIwMjAtMDEtMjMg7KeA7JetIOuzgOyImCDshKTsoJUKICAgICAgICAgICAgLy8gc2VsZWN0aW9uOiBbXSwKICAgICAgICAgICAgZW1wX2lkOltdLAogICAgICAgICAgICBjaG9pY2U6W10sCiAgICAgICAgICAgIHdpZHRoMSA6IDAsIC8vIOyEpOusuCAx67KIIOuMgOuLteyXkCDrjIDtlZwgJQogICAgICAgICAgICB3aWR0aDIgOiAwLCAvLyDshKTrrLggMuuyiCDrjIDri7Xsl5Ag64yA7ZWcICUKICAgICAgICAgICAgd2lkdGgzIDogMCwgLy8g7ISk66y4IDPrsogg64yA64u17JeQIOuMgO2VnCAlIC0gd2lkdGgxIH4gd2lkdGgzIOq5jOyngCDrjZTtlZjrqbQg7LSdIDEwMCUKICAgICAgICAgICAgczE6MCwKICAgICAgICAgICAgczI6MCwKICAgICAgICAgICAgczM6MCwKICAgICAgICAgICAgLy8gc2VsZWN0OiAwCgogICAgICAgIH0KCiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIHN1Yk1lbnU6IFN1cnZleVN1Ym1lbnUKICAgIH0sCiAgICBwcm9wczogWyJzdXJ2ZXkiXSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvL+ybkO2VmOuKlCDsi5zqsIQg7ZiV7Iud7Jy866GcIOuwlOq/lOyEnCDstpzroKXtlbTso7zripQg66mU7ISc65OcCiAgICAgICAgdGltZShkYXRlKXsKICAgICAgICAgICAgdmFyIG1vbWVudD1yZXF1aXJlKCJtb21lbnQiKTsKCiAgICAgICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCJZWVlZ64WEIE1N7JuUIERE7J28Iik7CiAgICAgICAgfSwKICAgICAgICBnb0JhY2soKXsKICAgICAgICAgICAgICBoaXN0b3J5LmdvKC0xKTsKICAgICAgICB9LAogICAgICAgIC8vMjAyMC0wMS0yMyDrk7HroZ0g66mU7ISc65OcCiAgICAgICAgLy/soIDsnqXrkJwg7ISk66y465Ok7J2EIOuLpCDqsIDsoLjsmKTripQg66mU7ISc65OcIO2VtOuLuSBzdXJ2ZXlfaWTsl5AgZW1wX2lkKO2IrO2RnO2VnCDsgqzsm5ApICwgc2VsZWN0aW9uKOuqh+uyiOydhCDshKDtg53tlojripTsp4ApLAogICAgICAgIGdldHZvdGUoKXsKICAgICAgICAgICAgY29uc29sZS5sb2coIuyEpOusuCDslYTsnbTrlJQgOiAiICsgdGhpcy5zdXJ2ZXkuc3VydmV5X2lkKQogICAgICAgICAgICBodHRwCiAgICAgICAgICAgIC5nZXQoIi9zdXJ2ZXkvZ2V0dm90ZS8iK3RoaXMuc3VydmV5LnN1cnZleV9pZCkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgdGhpcy5jaG9pY2UgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImVtcF9pZD4+Pj4+Pj4+Pj4+Pj4+PiIrdGhpcy5jaG9pY2UuZW1wX2lkKTsKICAgICAgICAgICAgICAgIC8vIGNob2ljZSDstJ0g6rCc7IiY64qUIHRoaXMuY2hvaWNlLmxlbmd0aCA6IOydtCDsg4Htmansl5DshJzripQgMuqwnAogICAgICAgICAgICAgICAgLy8gZm9yIOusuCDrj4zroKTshJwg7LSdIGNob2ljZSDqsJzsiJgg66eM7YG87J2YIHNlbGVjdGlvbiDqsJbqs6Ag7Jik6riwIDog7Jes6riw7ISc64qUIDLrsojrp4wgMuqwnOuLiOq5jCAxMDAlCiAgICAgICAgICAgICAgICAvLyBzZWxlY3Rpb24g7J20IDHrsojsnbgg7LSdIOqwnOyImOulvCB3aWR0aDHsl5Ag64Sj6rOgLi4uLndpZHRoMiwgd2lkdGgzIOuPhCDrp4jssKzqsIDsp4AKICAgICAgICAgICAgICAgIC8vIHdpZHRoMSwgd2lkdGgyLCB3aWR0aDMg7J2YIOqwgSDtjbzshLztirgg6rWs7ZW07IScIOychOyXkCDrs4DsiJjroZwg64Sj7Ja07KO86riwCiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmNob2ljZS5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtcF9pZFtpXT10aGlzLmNob2ljZVtpXS5lbXBfaWQ7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuuEo+yWtOyjvOuKlCBlbXA+Pj4+Pj4+Pj4+Pj4+PiIrdGhpcy5lbXBfaWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuY2hvaWNlLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hvaWNlW2ldLnNlbGVjdGlvbiArICJzZWxlY3Rpb24iKTsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNob2ljZVtpXS5zZWxlY3Rpb249PTEpewoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaSArICJmb3IgSSAiICkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zMSsrOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnMxICsgInMxIikKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmNob2ljZVtpXS5zZWxlY3Rpb249PT0yKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zMisrOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMzKys7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy53aWR0aDE9dGhpcy5zMS90aGlzLmNob2ljZS5sZW5ndGggKiAxMDA7CiAgICAgICAgICAgICAgICB0aGlzLndpZHRoMj10aGlzLnMyL3RoaXMuY2hvaWNlLmxlbmd0aCAqIDEwMDsKICAgICAgICAgICAgICAgIHRoaXMud2lkdGgzPXRoaXMuczMvdGhpcy5jaG9pY2UubGVuZ3RoICogMTAwOwogICAgICAgICAgICB9KQoKICAgICAgICB9LAogICAgICAgIGRlbGV0ZVBvc3QoKSB7CiAgICAgICAgICAgIGh0dHAKICAgICAgICAgICAgICAgIC5kZWxldGUoIi9zdXJ2ZXkvZGVsZXRlc3VydmV5LyIgKyB0aGlzLnN1cnZleS5zdXJ2ZXlfaWQpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kZW1pdCgicmVmcmVzaERhdGEiKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3N1cnZleScpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgYWxlcnQoIuyEpOusuOydtCDsgq3soJzrkJjsl4jsirXri4jri6QuIik7CiAgICAgICAgfSwKCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICAvLyBtb3VudGVkIOuQoCDrlYwg66Gc6re47J247J20IOuQmOyWtOyeiOuKlCDsg4Htg5zrnbzrqbQKICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UubGVuZ3RoID4gMCkgeyAvLyDtmITsnqwgc2Vzc2lvblN0b3JhZ2Xsl5Ag7JqU7IaM6rCAIOyhtOyerO2VmOuKlCDsg4Htg5zsnbwg65WMKOuhnOq3uOyduOydtCDrkJjslrTshJwgc2Vzc2lvblN0b3JhZ2Xsl5Ag7KCA7J6l65CcIOyDge2DnOydvCDrlYwpCiAgICAgICAgICAgIHRoaXMuZW1wSUQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dpbl9pZCIpOwogICAgICAgICAgICB0aGlzLmdldHZvdGUoKTsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgICB9CiAgICB9LAp9Owo="},{"version":3,"sources":["EndSurvey.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"EndSurvey.vue","sourceRoot":"src/components/survey","sourcesContent":["<template>\r\n    <div>\r\n        <h4 style=\"margin: 20px; font-weight: bold\">설문조사</h4>\r\n    <div class=\"root3\">\r\n    <div v-if=\"this.survey\">\r\n        <div>\r\n\r\n            <subMenu></subMenu>\r\n        </div>\r\n\r\n\r\n        <hr style=\"width: 80%; margin: 60px 60px 20px 75px;\">\r\n        <!--여기부터-->\r\n        <div class=\"subjectbox_survey\" style=\"font-weight: bold\">\r\n            <label >작성자 : </label> &nbsp;&nbsp;&nbsp;&nbsp;{{this.survey.survey_writer}}\r\n        </div>\r\n        <div class=\"subjectbox_survey\" style=\"font-weight: bold\">\r\n            <label >시작일 : </label> &nbsp;&nbsp;&nbsp;&nbsp;{{time(this.survey.start_date)}}\r\n        </div>\r\n        <div class=\"subjectbox_survey\" style=\"font-weight: bold\">\r\n            <label >종료일 : </label> &nbsp;&nbsp;&nbsp;&nbsp;{{time(this.survey.end_date)}}\r\n        </div>\r\n\r\n        <hr  style=\"width: 80%; margin-bottom: 50px;\">\r\n            <div class=\"qstbox\">\r\n                <label style=\"font-weight: bold; font-size: 30px;\">  &nbsp;&nbsp;&nbsp;&nbsp;{{this.survey.survey_subject}}</label>\r\n            </div>\r\n\r\n        <div class=\"progressbox\">\r\n            1번 :   {{this.survey.answer1 }}({{Math.round(width1)}}%)\r\n            <div class=\"progress\">\r\n                <div class=\"progress-bar bg-info\" role=\"progressbar\" :style=\"{width: width1+'%'}\"></div>\r\n            </div><br>\r\n\r\n          2번 :  {{this.survey.answer2 }}({{Math.round(width2)}}%) &nbsp;\r\n\r\n            <div class=\"progress\">\r\n                <div class=\"progress-bar bg-warning\" role=\"progressbar\" :style=\"{width: width2+'%'}\"></div>\r\n            </div><br>\r\n\r\n           3번 :  {{this.survey.answer3 }}({{Math.round(width3)}}%)\r\n\r\n            <div class=\"progress\">\r\n                <div class=\"progress-bar bg-danger\" role=\"progressbar\" :style=\"{width: width3+'%'}\"></div>\r\n            </div> <br>\r\n            <small class=\"form-text text-muted\" id=\"fileHelp\">다중 선택 및 재투표는 불가능 합니다.</small>\r\n            <small class=\"form-text text-muted\" id=\"hihi\">신중하게 선택하여 투표해 주시기 바랍니다.</small>\r\n\r\n        </div>\r\n<!--            총 참여자 수 : {{this.choice.length}} 명<br>-->\r\n<!--&lt;!&ndash;            총 참여자 수 : {{this.emp_id}} 명<br>&ndash;&gt;-->\r\n<!--            <li v-for=\"(choice, index) in choice\" :key=\"index\" class=\"page-item active\" >-->\r\n<!--                {{choice.emp_id}}-->\r\n<!--            </li>-->\r\n<!--        투표한 사람 {{this.emp_id}}-->\r\n<!--        로그인 번호 {{this.empID}}<br>-->\r\n            <button class=\"btn btn-success\" type=\"button\" @click=\"goBack\">돌아가기</button>\r\n\r\n            <button v-if=\"empID==10002\"class=\"btn btn-primary\" type=\"button\" @click=\"deletePost\">설문삭제</button>\r\n        </div>\r\n        <!--여기까지 div로 묶고 검사-->\r\n        <div v-else>\r\n            <label>제목</label>\r\n            <input type=\"text\" class=\"form-control\" id=\"subject\"\r\n                   required v-model=\"survey.survey_subject\" name=\"subject\">\r\n            <label>내용</label>\r\n            <textarea class=\"form-control textArea\" rows=\"15\" required v-model=\"survey.survey_detail\">{{survey.survey_detail}},\r\n\r\n\r\n            </textarea><br>\r\n\r\n<!--            <button class=\"btn btn-success\" type=\"button\" @click=\"updatePost\">수정하기</button>-->\r\n        </div>\r\n\r\n    </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import http from \"../../http-common\";\r\n    import SurveySubmenu from \"./SurveySubmenu\";\r\n    import VueApexCharts from 'vue-apexcharts';\r\n    export default {\r\n        name: \"survey\",\r\n\r\n        data() {\r\n\r\n            return {\r\n                flex: \"\",// 나중에 조건 검사하면 글 작성자==나 일때 false로 바꾸기\r\n                flag:\"\",\r\n                empID: \"\", //현재 로그인 된 empID를 가져온다.\r\n                //2020-01-23 지역 변수 설정\r\n                // selection: [],\r\n                emp_id:[],\r\n                choice:[],\r\n                width1 : 0, // 설문 1번 대답에 대한 %\r\n                width2 : 0, // 설문 2번 대답에 대한 %\r\n                width3 : 0, // 설문 3번 대답에 대한 % - width1 ~ width3 까지 더하면 총 100%\r\n                s1:0,\r\n                s2:0,\r\n                s3:0,\r\n                // select: 0\r\n\r\n            }\r\n\r\n        },\r\n        components: {\r\n            subMenu: SurveySubmenu\r\n        },\r\n        props: [\"survey\"],\r\n        methods: {\r\n            //원하는 시간 형식으로 바꿔서 출력해주는 메서드\r\n            time(date){\r\n                var moment=require(\"moment\");\r\n\r\n                return moment(date).format(\"YYYY년 MM월 DD일\");\r\n            },\r\n            goBack(){\r\n                  history.go(-1);\r\n            },\r\n            //2020-01-23 등록 메서드\r\n            //저장된 설문들을 다 가져오는 메서드 해당 survey_id에 emp_id(투표한 사원) , selection(몇번을 선택했는지),\r\n            getvote(){\r\n                console.log(\"설문 아이디 : \" + this.survey.survey_id)\r\n                http\r\n                .get(\"/survey/getvote/\"+this.survey.survey_id)\r\n                .then(response => {\r\n                    this.choice = response.data;\r\n                    console.log(\"emp_id>>>>>>>>>>>>>>>\"+this.choice.emp_id);\r\n                    // choice 총 개수는 this.choice.length : 이 상황에서는 2개\r\n                    // for 문 돌려서 총 choice 개수 만큼의 selection 갖고 오기 : 여기서는 2번만 2개니까 100%\r\n                    // selection 이 1번인 총 개수를 width1에 넣고....width2, width3 도 마찬가지\r\n                    // width1, width2, width3 의 각 퍼센트 구해서 위에 변수로 넣어주기\r\n                    for(let i=0; i<this.choice.length;i++){\r\n                        this.emp_id[i]=this.choice[i].emp_id;\r\n                        console.log(\"넣어주는 emp>>>>>>>>>>>>>>\"+this.emp_id);\r\n                    }\r\n\r\n                    for(let i=0; i<this.choice.length;i++){\r\n                        console.log(this.choice[i].selection + \"selection\");\r\n                        if(this.choice[i].selection==1){\r\n\r\n                            console.log(i + \"for I \" )\r\n                            this.s1++;\r\n                            console.log(this.s1 + \"s1\")\r\n                        }else if(this.choice[i].selection===2){\r\n                            this.s2++;\r\n                        }else{\r\n                            this.s3++;\r\n                        }\r\n                    }\r\n                    this.width1=this.s1/this.choice.length * 100;\r\n                    this.width2=this.s2/this.choice.length * 100;\r\n                    this.width3=this.s3/this.choice.length * 100;\r\n                })\r\n\r\n            },\r\n            deletePost() {\r\n                http\r\n                    .delete(\"/survey/deletesurvey/\" + this.survey.survey_id)\r\n                    .then(response => {\r\n                        console.log(response.data);\r\n                        // this.$emit(\"refreshData\");\r\n                        this.$router.push('/survey');\r\n                    })\r\n                alert(\"설문이 삭제되었습니다.\");\r\n            },\r\n\r\n        },\r\n        mounted() {\r\n            // mounted 될 때 로그인이 되어있는 상태라면\r\n            if (sessionStorage.length > 0) { // 현재 sessionStorage에 요소가 존재하는 상태일 때(로그인이 되어서 sessionStorage에 저장된 상태일 때)\r\n                this.empID = sessionStorage.getItem(\"login_id\");\r\n                this.getvote();\r\n\r\n            } else {\r\n                this.$router.push(\"/\");\r\n            }\r\n        },\r\n    };\r\n</script>\r\n<style>\r\n    /*.sidelist {*/\r\n    /*    position: fixed;*/\r\n    /*    left: 0;*/\r\n    /*}*/\r\n    .card {\r\n        position: center;\r\n        text-align: left;\r\n        left: 400px;\r\n        height: 400px;\r\n    }\r\n\r\n    .progress {\r\n        width: 60%;\r\n        margin-left: 20%;\r\n        height: 40px;\r\n    }\r\n    .root3{\r\n        width: 800px;\r\n        border: silver solid 1px;\r\n        margin: 10px;\r\n        padding: 20px 0 50px 0;\r\n        position: absolute;\r\n        left: 24%;\r\n\r\n    }\r\n    .subjectbox_survey{\r\n        margin: 10px auto;\r\n        left: 0;\r\n        width: 80%;\r\n        border: silver solid 0px;\r\n        text-align: left;\r\n    }\r\n    .progressbox{\r\n        border: #dddddd solid 1px;\r\n        width: 80%;\r\n        margin: 0 auto;\r\n        padding: 20px;\r\n    }\r\n\r\n    /*.qstbox {*/\r\n    /*    position: absolute;*/\r\n    /*    left: 10%;*/\r\n    /*}*/\r\n\r\n</style>"]}]}