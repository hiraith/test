{"remainingRequest":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\src\\components\\working\\WorkingSubMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\src\\components\\working\\WorkingSubMenu.vue","mtime":1579353702849},{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ciz\\IdeaProjects\\UpfficeFront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBodHRwIGZyb20gIi4uLy4uL2h0dHAtY29tbW9uIjsKaW1wb3J0IENsb2NrIGZyb20gIi4vQ2xvY2siOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIldvcmtpbmdTdWJNZW51IiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgd29ya2luZzogewogICAgICAgICAgICAgICAgZW1wSWQ6ICIiLAogICAgICAgICAgICAgICAgd29ya2luZ0RhdGU6IiIsCiAgICAgICAgICAgICAgICB3b3JraW5nSW46ICIiLAogICAgICAgICAgICAgICAgd29ya2luZ091dDogIiIsCiAgICAgICAgICAgICAgICB3b3JraW5nVGltZToiIiwKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9LC8vIEVuZCAtIGRhdGEKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBDbG9jazogQ2xvY2sKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqLwogICAgICAgIHJlYWRXb3JraW5nVG9kYXkoKSB7Ly/ri7nsnbzsl5Ag7Lac7Ye06re86riw66Gd7J20IOyeiOycvOuptCDrtojrn6zsmKjri6QsIG1vdW50ZWQoKeuVjCDtmLjstpzrkJjripQg66mU7IaM65OcLgogICAgICAgICAgICBodHRwCiAgICAgICAgICAgICAgICAuZ2V0KCIvd29ya2luZy9yZWFkVG9kYXkvIiArIHRoaXMud29ya2luZy5lbXBJZCkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtpbmcgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZWFkIiArIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sLy8gRW5kIC0gcmVhZFdvcmtpbmdUb2RheSgpCiAgICAgICAgc2F2ZVdvcmtpbmdJbigpIHsvLyDstpzqt7zsi5wg7Lac6re8IOyLnOqwhOydhCBEQuyXkCDsoIDsnqXtlZjquLAg7JyE7ZWcIOuplOyGjOuTnAogICAgICAgICAgICBodHRwCiAgICAgICAgICAgICAgICAuZ2V0KCIvd29ya2luZy9zYXZlSW4vIiArIHRoaXMud29ya2luZy5lbXBJZCkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtpbmcud29ya2luZ0luID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LC8vIEVuZCAtIHNhdmVXb3JraW5nSW4oKQogICAgICAgIHNhdmVXb3JraW5nT3V0KCkgey8vIO2HtOq3vCDsi5wg7Ye06re8IOyLnOqwhOydhCBEQuyXkCDsoIDsnqXtlZjquLAg7JyE7ZWcIOuplOyGjOuTnAogICAgICAgICAgICBodHRwCiAgICAgICAgICAgICAgICAuZ2V0KCIvd29ya2luZy9zYXZlT3V0LyIgKyB0aGlzLndvcmtpbmcuZW1wSWQpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JraW5nLndvcmtpbmdPdXQgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY1dvcmtpbmdUaW1lKCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwvLyBFbmQgLSBzYXZlV29ya2luZ091dCgpCiAgICAgICAgc2F2ZVdvcmtpbmdUaW1lKCkgey8vIOy0nSDqt7zrrLQg7Iuc6rCE7J2EIERC7JeQIOyggOyepe2VmOq4sCDsnITtlZwg66mU7IaM65OcCiAgICAgICAgICAgIGh0dHAKICAgICAgICAgICAgICAgIC5nZXQoIi93b3JraW5nL3NhdmVUaW1lLyIgKyB0aGlzLndvcmtpbmcuZW1wSWQrIj93ZD0iK3RoaXMud29ya2luZy53b3JraW5nVGltZSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtpbmcud29ya2luZ1RpbWUgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sLy8gRW5kIC0gc2F2ZVdvcmtpbmdUaW1lKCkKICAgICAgICBjYWxjV29ya2luZ1RpbWUoKSB7Ly8g7LSdIOq3vOustCDsi5zqsITsnYQg6rOE7IKw7ZWY64qUIOuplOyGjOuTnAogICAgICAgICAgICBsZXQgd2l0ID0gbmV3IERhdGUoRGF0ZS5wYXJzZSgiMDAwMS0wMS0wMSAiK3RoaXMud29ya2luZy53b3JraW5nSW4pKTsvLyDstpzqt7zsi5zqsITsnYQgRGF0Ze2YleycvOuhnCDtmJXrs4DtmZgKICAgICAgICAgICAgbGV0IHdvdCA9IG5ldyBEYXRlKERhdGUucGFyc2UoIjAwMDEtMDEtMDEgIit0aGlzLndvcmtpbmcud29ya2luZ091dCkpOy8vIO2HtOq3vOyLnOqwhOydhCBEYXRl7ZiV7Jy866GcIO2YleuzgO2ZmAoKICAgICAgICAgICAgd290LnNldEhvdXJzKHdvdC5nZXRIb3VycygpLXdpdC5nZXRIb3VycygpKTsvLyDsi5wg67aA67aE64G866asIOyXsOyCsAogICAgICAgICAgICB3b3Quc2V0TWludXRlcyh3b3QuZ2V0TWludXRlcygpLXdpdC5nZXRNaW51dGVzKCkpOy8vIOu2hCDrtoDrtoTrgbzrpqwg7Jew7IKwCiAgICAgICAgICAgIHdvdC5zZXRTZWNvbmRzKHdvdC5nZXRTZWNvbmRzKCktd2l0LmdldFNlY29uZHMoKSk7Ly8g7LSIIOu2gOu2hOuBvOumrCDsl7DsgrAKCiAgICAgICAgICAgIHRoaXMud29ya2luZy53b3JraW5nVGltZT13b3QudG9TdHJpbmcoKS5zdWJzdHIoMTYsOCk7IC8vIOyXsOyCsOuQnCDqsJLspJEg7Iuc6rCE7JeQIOq0gOugqOuQnCDrtoDrtoTsnYQg7J6Y65287IScIOyggOyepQogICAgICAgICAgICB0aGlzLnNhdmVXb3JraW5nVGltZSgpOy8vIERC7JeQIOy0nSDqt7zrrLQg7Iuc6rCEIOyggOyepQogICAgICAgIH0sLy8gRW5kIC0gY2FsY1dvcmtpbmdUaW1lKCkKICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi8KICAgIH0sLy8gRW5kIC0gbWV0aG9kcwogICAgbW91bnRlZCgpIHsKICAgICAgICAvLyBtb3VudGVkIOuQoCDrlYwg66Gc6re47J247J20IOuQmOyWtOyeiOuKlCDsg4Htg5zrnbzrqbQKICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UubGVuZ3RoID4gMCkgeyAvLyDtmITsnqwgc2Vzc2lvblN0b3JhZ2Xsl5Ag7JqU7IaM6rCAIOyhtOyerO2VmOuKlCDsg4Htg5zsnbwg65WMKOuhnOq3uOyduOydtCDrkJjslrTshJwgc2Vzc2lvblN0b3JhZ2Xsl5Ag7KCA7J6l65CcIOyDge2DnOydvCDrlYwpCiAgICAgICAgICAgIHRoaXMud29ya2luZy5lbXBJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luX2lkIik7Ly8gc2Vzc2lvblN0b3JhZ2Xsl5DshJwg7IKs67KIIOqwgOyguOyYpOq4sAogICAgICAgICAgICB0aGlzLnJlYWRXb3JraW5nVG9kYXkoKTsvLyDstpzth7Tqt7wg6riw66GdIOqwgOyguOyYpOq4sAogICAgICAgIH0KICAgIH0vLyBFbmQgLSBtb3VudGVkKCkKfTsvLyBFbmQgLSBleHBvcnQgZGVmYXVsdAo="},{"version":3,"sources":["WorkingSubMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WorkingSubMenu.vue","sourceRoot":"src/components/working","sourcesContent":["<template>\r\n    <div class=\"subMenu\">\r\n        <Clock></Clock>\r\n        출근시간:{{this.working.workingIn}}<br>\r\n        퇴근시간:{{this.working.workingOut}}<br>\r\n        근무시간:{{this.working.workingTime}}<br>\r\n        <button v-if=\"!this.working.workingIn\" v-on:click=\"saveWorkingIn()\" class=\"btn btn-outline-danger btn-working\">출근</button>\r\n        <button v-else class=\"btn btn-danger disabled btn-working\">출근</button>\r\n\r\n        <button v-if=\"!this.working.workingOut\" v-on:click=\"saveWorkingOut()\" class=\"btn btn-outline-info btn-working\">퇴근</button>\r\n        <button v-else class=\"btn btn-info disabled btn-working\">퇴근</button>\r\n        <br>\r\n        [근태관리]\r\n        <ul class=\"nav nav-pills flex-column\">\r\n            <router-link to=\"/working/status\">\r\n                <li class=\"list-group-item d-flex justify-content-between align-items-center libgclr\">\r\n                    내 근태 현황\r\n                </li>\r\n            </router-link>\r\n            <router-link to=\"/working/annual\">\r\n                <li class=\"list-group-item d-flex justify-content-between align-items-center libgclr\">\r\n                    내 연차 내역\r\n                </li>\r\n            </router-link>\r\n        </ul>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import http from \"../../http-common\";\r\n    import Clock from \"./Clock\";\r\n\r\n    export default {\r\n        name: \"WorkingSubMenu\",\r\n        data() {\r\n            return {\r\n                working: {\r\n                    empId: \"\",\r\n                    workingDate:\"\",\r\n                    workingIn: \"\",\r\n                    workingOut: \"\",\r\n                    workingTime:\"\",\r\n                }\r\n            };\r\n        },// End - data\r\n        components: {\r\n            Clock: Clock\r\n        },\r\n        methods: {\r\n            /* eslint-disable no-console */\r\n            readWorkingToday() {//당일에 출퇴근기록이 있으면 불러온다, mounted()때 호출되는 메소드.\r\n                http\r\n                    .get(\"/working/readToday/\" + this.working.empId)\r\n                    .then(response => {\r\n                        this.working = response.data;\r\n                        console.log(\"read\" + response.data);\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                    });\r\n            },// End - readWorkingToday()\r\n            saveWorkingIn() {// 출근시 출근 시간을 DB에 저장하기 위한 메소드\r\n                http\r\n                    .get(\"/working/saveIn/\" + this.working.empId)\r\n                    .then(response => {\r\n                        this.working.workingIn = response.data;\r\n                        console.log(response.data);\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                    });\r\n            },// End - saveWorkingIn()\r\n            saveWorkingOut() {// 퇴근 시 퇴근 시간을 DB에 저장하기 위한 메소드\r\n                http\r\n                    .get(\"/working/saveOut/\" + this.working.empId)\r\n                    .then(response => {\r\n                        this.working.workingOut = response.data;\r\n                        console.log(response.data);\r\n                        this.calcWorkingTime();\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                    });\r\n            },// End - saveWorkingOut()\r\n            saveWorkingTime() {// 총 근무 시간을 DB에 저장하기 위한 메소드\r\n                http\r\n                    .get(\"/working/saveTime/\" + this.working.empId+\"?wd=\"+this.working.workingTime)\r\n                    .then(response => {\r\n                        this.working.workingTime = response.data;\r\n                        console.log(response.data);\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                    });\r\n            },// End - saveWorkingTime()\r\n            calcWorkingTime() {// 총 근무 시간을 계산하는 메소드\r\n                let wit = new Date(Date.parse(\"0001-01-01 \"+this.working.workingIn));// 출근시간을 Date형으로 형변환\r\n                let wot = new Date(Date.parse(\"0001-01-01 \"+this.working.workingOut));// 퇴근시간을 Date형으로 형변환\r\n\r\n                wot.setHours(wot.getHours()-wit.getHours());// 시 부분끼리 연산\r\n                wot.setMinutes(wot.getMinutes()-wit.getMinutes());// 분 부분끼리 연산\r\n                wot.setSeconds(wot.getSeconds()-wit.getSeconds());// 초 부분끼리 연산\r\n\r\n                this.working.workingTime=wot.toString().substr(16,8); // 연산된 값중 시간에 관련된 부분을 잘라서 저장\r\n                this.saveWorkingTime();// DB에 총 근무 시간 저장\r\n            },// End - calcWorkingTime()\r\n            /* eslint-enable no-console */\r\n        },// End - methods\r\n        mounted() {\r\n            // mounted 될 때 로그인이 되어있는 상태라면\r\n            if (sessionStorage.length > 0) { // 현재 sessionStorage에 요소가 존재하는 상태일 때(로그인이 되어서 sessionStorage에 저장된 상태일 때)\r\n                this.working.empId = sessionStorage.getItem(\"login_id\");// sessionStorage에서 사번 가져오기\r\n                this.readWorkingToday();// 출퇴근 기록 가져오기\r\n            }\r\n        }// End - mounted()\r\n    };// End - export default\r\n</script>\r\n\r\n<style>\r\n    .btn-working {\r\n        align: center;\r\n    }\r\n</style>\r\n"]}]}